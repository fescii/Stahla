{
  "edges": [
    {
      "id": "edge_start_to_ask_name",
      "source": "start_call",
      "target": "ask_name",
      "label": "Continue after introduction"
    },
    {
      "id": "edge_ask_name_to_ask_company",
      "source": "ask_name",
      "target": "ask_company_name",
      "label": "Name collected"
    },
    {
      "id": "edge_ask_company_to_confirm_email",
      "source": "ask_company_name",
      "target": "confirm_email",
      "label": "Company name collected"
    },
    {
      "id": "edge_confirm_email_to_confirm_phone",
      "source": "confirm_email",
      "target": "confirm_phone",
      "label": "Email confirmed/collected"
    },
    {
      "id": "edge_confirm_phone_to_ask_project_cat",
      "source": "confirm_phone",
      "target": "ask_project_category",
      "label": "Phone confirmed/collected"
    },
    {
      "id": "edge_ask_project_cat_to_ask_prod_type",
      "source": "ask_project_category",
      "target": "ask_product_type",
      "label": "Project category and usage type collected"
    },
    {
      "id": "edge_ask_prod_type_to_units_desc",
      "source": "ask_product_type",
      "target": "ask_units_needed_description_capture",
      "label": "Product type collected"
    },
    {
      "id": "edge_units_desc_to_ask_ada",
      "source": "ask_units_needed_description_capture",
      "target": "ask_ada_required",
      "label": "Units description collected"
    },
    {
      "id": "edge_ask_ada_to_ask_start_date",
      "source": "ask_ada_required",
      "target": "ask_start_date",
      "label": "ADA requirement collected"
    },
    {
      "id": "edge_ask_start_date_to_ask_duration",
      "source": "ask_start_date",
      "target": "ask_rental_duration_days",
      "label": "Start date collected"
    },
    {
      "id": "edge_ask_duration_to_ask_extras_gen",
      "source": "ask_rental_duration_days",
      "target": "ask_extras_generator",
      "label": "Rental days collected"
    },
    {
      "id": "edge_ask_extras_gen_to_ask_extras_other",
      "source": "ask_extras_generator",
      "target": "ask_extras_other",
      "label": "Generator info collected"
    },
    {
      "id": "edge_ask_extras_other_to_prepare_extras",
      "source": "ask_extras_other",
      "target": "prepare_extras_for_api",
      "label": "Other extras info collected"
    },
    {
      "id": "edge_prepare_extras_to_check_address",
      "source": "prepare_extras_for_api",
      "target": "check_metadata_address_prompt_node",
      "label": "Extras prepared for API"
    },
    {
      "id": "edge_check_address_to_prep_meta_addr",
      "source": "check_metadata_address_prompt_node",
      "target": "prepare_address_from_metadata_node",
      "label": "{{confirm_address_is_initial}} == true"
    },
    {
      "id": "edge_check_address_to_collect_addr",
      "source": "check_metadata_address_prompt_node",
      "target": "collect_address",
      "label": "{{confirm_address_is_initial}} == false"
    },
    {
      "id": "edge_prep_meta_addr_to_trigger_bg_loc",
      "source": "prepare_address_from_metadata_node",
      "target": "trigger_background_location_processing_node",
      "label": "Address from metadata prepared"
    },
    {
      "id": "edge_collect_addr_to_prep_coll_addr",
      "source": "collect_address",
      "target": "prepare_address_from_collection_node",
      "label": "New address collected"
    },
    {
      "id": "edge_prep_coll_addr_to_trigger_bg_loc",
      "source": "prepare_address_from_collection_node",
      "target": "trigger_background_location_processing_node",
      "label": "Collected address prepared"
    },
    {
      "id": "edge_trigger_bg_loc_to_check_svc_area",
      "source": "trigger_background_location_processing_node",
      "target": "check_service_area_logic_node",
      "label": "Continue after triggering background location lookup"
    },
    {
      "id": "edge_check_svc_area_to_oos",
      "source": "check_service_area_logic_node",
      "target": "handle_out_of_service_area",
      "label": "{{is_in_service_area}} == false"
    },
    {
      "id": "edge_check_svc_area_to_site_details",
      "source": "check_service_area_logic_node",
      "target": "ask_site_details_paq_pbq_combined",
      "label": "{{is_in_service_area}} == true"
    },
    {
      "id": "edge_oos_to_offer_referral",
      "source": "handle_out_of_service_area",
      "target": "offer_referral",
      "label": "Continue after OOS notification"
    },
    {
      "id": "edge_offer_referral_yes",
      "source": "offer_referral",
      "target": "closing_oos_referral",
      "label": "{{offer_referral_consent}} == true"
    },
    {
      "id": "edge_offer_referral_no",
      "source": "offer_referral",
      "target": "closing_oos_no_referral",
      "label": "{{offer_referral_consent}} == false"
    },
    {
      "id": "edge_closing_oos_referral_to_end",
      "source": "closing_oos_referral",
      "target": "end_call_speak_final",
      "label": "End call after OOS referral"
    },
    {
      "id": "edge_closing_oos_no_referral_to_end",
      "source": "closing_oos_no_referral",
      "target": "end_call_speak_final",
      "label": "End call after OOS no referral"
    },
    {
      "id": "edge_site_details_to_trailer_utilities",
      "source": "ask_site_details_paq_pbq_combined",
      "target": "ask_trailer_specific_utilities_paq",
      "label": "Site details collected, product is trailer-like (e.g. {{trailer_type}}.toLowerCase().includes('trailer'))"
    },
    {
      "id": "edge_site_details_to_contact_consent_for_pp",
      "source": "ask_site_details_paq_pbq_combined",
      "target": "ask_contact_consent",
      "label": "Site details collected, product is porta potty (e.g. {{trailer_type}}.toLowerCase().includes('potty'))"
    },
    {
      "id": "edge_trailer_utilities_to_no_power_check",
      "source": "ask_trailer_specific_utilities_paq",
      "target": "ask_generator_if_no_power_paq",
      "label": "{{power_available}} == false"
    },
    {
      "id": "edge_trailer_utilities_to_contact_consent",
      "source": "ask_trailer_specific_utilities_paq",
      "target": "ask_contact_consent",
      "label": "{{power_available}} == true"
    },
    {
      "id": "edge_no_power_check_to_contact_consent",
      "source": "ask_generator_if_no_power_paq",
      "target": "ask_contact_consent",
      "label": "Generator check after no power for trailer complete"
    },
    {
      "id": "edge_contact_consent_yes",
      "source": "ask_contact_consent",
      "target": "recap_details",
      "label": "{{contact_consent}} == true"
    },
    {
      "id": "edge_contact_consent_no",
      "source": "ask_contact_consent",
      "target": "cannot_quote_no_consent",
      "label": "{{contact_consent}} == false"
    },
    {
      "id": "edge_recap_correct",
      "source": "recap_details",
      "target": "ask_quote_urgency",
      "label": "{{details_recap_correct}} == true"
    },
    {
      "id": "edge_recap_incorrect_loop_to_name",
      "source": "recap_details",
      "target": "ask_name",
      "label": "{{details_recap_correct}} == false"
    },
    {
      "id": "edge_ask_quote_urgency_to_decision_time",
      "source": "ask_quote_urgency",
      "target": "ask_decision_timing",
      "label": "Continue after quote urgency"
    },
    {
      "id": "edge_ask_decision_time_to_get_quote",
      "source": "ask_decision_timing",
      "target": "get_quote_webhook",
      "label": "Proceed to get quote"
    },
    {
      "id": "edge_get_quote_success",
      "source": "get_quote_webhook",
      "target": "convey_quote",
      "label": "{{quote_api_success}} == true && {{estimated_total}} != null"
    },
    {
      "id": "edge_get_quote_failure",
      "source": "get_quote_webhook",
      "target": "api_error_quote_tool",
      "label": "{{quote_api_success}} == false || {{estimated_total}} == null"
    },
    {
      "id": "edge_convey_quote_sched_yes",
      "source": "convey_quote",
      "target": "handle_followup_scheduling",
      "label": "{{schedule_follow_up}} == true"
    },
    {
      "id": "edge_convey_quote_sched_no",
      "source": "convey_quote",
      "target": "ask_final_questions",
      "label": "{{schedule_follow_up}} == false"
    },
    {
      "id": "edge_cannot_quote_no_consent_to_ask_final",
      "source": "cannot_quote_no_consent",
      "target": "ask_final_questions",
      "label": "Continue after no consent to quote"
    },
    {
      "id": "edge_api_error_sched_yes",
      "source": "api_error_quote_tool",
      "target": "handle_followup_scheduling",
      "label": "{{schedule_follow_up_after_error}} == true"
    },
    {
      "id": "edge_api_error_sched_no",
      "source": "api_error_quote_tool",
      "target": "ask_final_questions",
      "label": "{{schedule_follow_up_after_error}} == false"
    },
    {
      "id": "edge_handle_followup_to_ask_final",
      "source": "handle_followup_scheduling",
      "target": "ask_final_questions",
      "label": "Continue after scheduling attempt"
    },
    {
      "id": "edge_ask_final_q_yes",
      "source": "ask_final_questions",
      "target": "answer_final_question_kb",
      "label": "{{has_final_questions}} == true && {{final_questions_text}} != null && {{final_questions_text}} != ''"
    },
    {
      "id": "edge_ask_final_q_no_direct_to_closing_with_followup",
      "source": "ask_final_questions",
      "target": "closing_with_followup",
      "label": "({{has_final_questions}} == false || {{final_questions_text}} == null || {{final_questions_text}} == '') && ({{schedule_follow_up}} == true || {{schedule_follow_up_after_error}} == true)"
    },
    {
      "id": "edge_ask_final_q_no_direct_to_closing_without_followup",
      "source": "ask_final_questions",
      "target": "closing_without_followup",
      "label": "({{has_final_questions}} == false || {{final_questions_text}} == null || {{final_questions_text}} == '') && {{schedule_follow_up}} == false && {{schedule_follow_up_after_error}} == false"
    },
    {
      "id": "edge_answer_kb_to_closing_with_followup",
      "source": "answer_final_question_kb",
      "target": "closing_with_followup",
      "label": "Answered question, follow-up scheduled ({{schedule_follow_up}} == true || {{schedule_follow_up_after_error}} == true)"
    },
    {
      "id": "edge_answer_kb_to_closing_without_followup",
      "source": "answer_final_question_kb",
      "target": "closing_without_followup",
      "label": "Answered question, no follow-up scheduled ({{schedule_follow_up}} == false && {{schedule_follow_up_after_error}} == false)"
    },
    {
      "id": "edge_closing_with_followup_to_end",
      "source": "closing_with_followup",
      "target": "end_call_speak_final",
      "label": "End call"
    },
    {
      "id": "edge_closing_without_followup_to_end",
      "source": "closing_without_followup",
      "target": "end_call_speak_final",
      "label": "End call"
    }
  ]
}